# AiTer å‘å¸ƒæŒ‡å—

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•é€šè¿‡ GitHub Actions è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ AiTer åº”ç”¨ç¨‹åºã€‚

## ğŸš€ å‘å¸ƒæµç¨‹

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨å‘å¸ƒè„šæœ¬ï¼ˆæœ€ç®€å•ï¼Œæ¨èï¼‰

æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªè‡ªåŠ¨åŒ–è„šæœ¬æ¥ç®€åŒ–å‘å¸ƒæµç¨‹ï¼š

```bash
# æ–¹å¼ 1: ä½¿ç”¨ npm å‘½ä»¤
npm run release 0.1.1

# æ–¹å¼ 2: ç›´æ¥è¿è¡Œè„šæœ¬
./scripts/create-release.sh 0.1.1
```

**è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š**
1. âœ… éªŒè¯ç‰ˆæœ¬å·æ ¼å¼
2. âœ… æ£€æŸ¥ Git æ ‡ç­¾æ˜¯å¦å·²å­˜åœ¨
3. âœ… æ£€æŸ¥æœªæäº¤çš„æ›´æ”¹ï¼ˆå¯é€‰æ‹©è‡ªåŠ¨æäº¤ï¼‰
4. âœ… æ›´æ–° package.json ç‰ˆæœ¬å·
5. âœ… æäº¤æ›´æ”¹
6. âœ… åˆ›å»º Git æ ‡ç­¾
7. âœ… æ¨é€åˆ° GitHubï¼ˆéœ€è¦ç¡®è®¤ï¼‰

**ç¤ºä¾‹è¾“å‡ºï¼š**
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  AiTer Release Creation Script
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â„¹ Creating release for version: 0.1.1
â„¹ Git tag will be: v0.1.1

â„¹ Step 1/7: Validating version format...
âœ“ Version format is valid
â„¹ Step 2/7: Checking if tag already exists...
âœ“ Tag does not exist, safe to proceed
...
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨ Git Tag æ–¹å¼

å¦‚æœä½ æ›´å–œæ¬¢æ‰‹åŠ¨æ§åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„ Git å‘½ä»¤ï¼š

```bash
# 1. ç¡®ä¿æ‰€æœ‰æ›´æ”¹å·²æäº¤
git add .
git commit -m "feat: Ready for release v0.1.1"

# 2. åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾ï¼ˆæ ¼å¼ï¼švä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢å·ï¼‰
git tag v0.1.1

# 3. æ¨é€æ ‡ç­¾åˆ° GitHub
git push origin v0.1.1

# 4. GitHub Actions ä¼šè‡ªåŠ¨ï¼š
#    - åœ¨ macOS å’Œ Windows ä¸Šæ„å»ºåº”ç”¨
#    - åˆ›å»º GitHub Release
#    - ä¸Šä¼ æ‰€æœ‰å®‰è£…åŒ…
```

### æ–¹æ³•ä¸‰ï¼šæ‰‹åŠ¨è§¦å‘

å¦‚æœéœ€è¦æ‰‹åŠ¨è§¦å‘æ„å»ºï¼ˆä¸åˆ›å»º Releaseï¼‰ï¼š

1. è®¿é—® GitHub ä»“åº“é¡µé¢
2. ç‚¹å‡» **Actions** æ ‡ç­¾
3. é€‰æ‹© **Build and Release** å·¥ä½œæµ
4. ç‚¹å‡» **Run workflow** æŒ‰é’®
5. é€‰æ‹©åˆ†æ”¯å¹¶ç‚¹å‡» **Run workflow**

## ğŸ“¦ æ„å»ºäº§ç‰©

æ¯æ¬¡å‘å¸ƒä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

### macOS
- `AiTer-{version}-mac-arm64.dmg` - Apple Silicon (M1/M2/M3) å®‰è£…åŒ…
- `AiTer-{version}-mac-arm64.zip` - Apple Silicon å‹ç¼©åŒ…
- `AiTer-{version}-mac-x64.dmg` - Intel èŠ¯ç‰‡å®‰è£…åŒ…
- `AiTer-{version}-mac-x64.zip` - Intel èŠ¯ç‰‡å‹ç¼©åŒ…

### Windows
- `AiTer-{version}-win-x64.exe` - Windows å®‰è£…ç¨‹åº
- `AiTer-{version}-win-x64.zip` - Windows å‹ç¼©åŒ…

## ğŸ“ ç‰ˆæœ¬å·è§„èŒƒ

ç‰ˆæœ¬å·éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/)ï¼ˆSemantic Versioningï¼‰ï¼š

```
vä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢å·

ä¾‹å¦‚ï¼šv0.1.0, v1.0.0, v1.2.3
```

- **ä¸»ç‰ˆæœ¬å·**ï¼šä¸å…¼å®¹çš„ API ä¿®æ”¹
- **æ¬¡ç‰ˆæœ¬å·**ï¼šå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **ä¿®è®¢å·**ï¼šå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

### ç‰ˆæœ¬ç¤ºä¾‹

```bash
# é¦–æ¬¡å‘å¸ƒ
git tag v0.1.0

# ä¿®å¤ Bug
git tag v0.1.1

# æ–°å¢åŠŸèƒ½ï¼ˆå‘ä¸‹å…¼å®¹ï¼‰
git tag v0.2.0

# é‡å¤§æ›´æ–°ï¼ˆå¯èƒ½ä¸å…¼å®¹ï¼‰
git tag v1.0.0
```

## ğŸ”„ æ„å»ºæµç¨‹è¯¦è§£

GitHub Actions å·¥ä½œæµæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

### æ„å»ºé˜¶æ®µï¼ˆå¹¶è¡Œï¼‰

1. **macOS æ„å»º**
   - æ£€å‡ºä»£ç 
   - å®‰è£… Node.js 20
   - å®‰è£…ä¾èµ–
   - TypeScript ç±»å‹æ£€æŸ¥
   - æ„å»º macOS åº”ç”¨ï¼ˆIntel + Apple Siliconï¼‰
   - ä¸Šä¼ æ„å»ºäº§ç‰©

2. **Windows æ„å»º**
   - æ£€å‡ºä»£ç 
   - å®‰è£… Node.js 20
   - å®‰è£…ä¾èµ–
   - TypeScript ç±»å‹æ£€æŸ¥
   - æ„å»º Windows åº”ç”¨
   - ä¸Šä¼ æ„å»ºäº§ç‰©

### å‘å¸ƒé˜¶æ®µï¼ˆä»…åœ¨æ‰“ Tag æ—¶ï¼‰

1. ä¸‹è½½æ‰€æœ‰æ„å»ºäº§ç‰©
2. æå–ç‰ˆæœ¬å·
3. åˆ›å»º GitHub Release
4. ä¸Šä¼ æ‰€æœ‰å®‰è£…åŒ…åˆ° Release

## ğŸ“¥ å›¢é˜Ÿæˆå‘˜ä¸‹è½½æŒ‡å—

### å‰ææ¡ä»¶

å›¢é˜Ÿæˆå‘˜éœ€è¦ï¼š
1. GitHub è´¦å·
2. å¯¹ `Within-7/aiter` ä»“åº“çš„è®¿é—®æƒé™ï¼ˆè‡³å°‘ Read æƒé™ï¼‰

### ä¸‹è½½æ­¥éª¤

1. **è®¿é—® Releases é¡µé¢**
   ```
   https://github.com/Within-7/aiter/releases
   ```

2. **é€‰æ‹©ç‰ˆæœ¬**
   - ç‚¹å‡»æœ€æ–°ç‰ˆæœ¬ï¼ˆé€šå¸¸åœ¨é¡µé¢é¡¶éƒ¨ï¼‰
   - æˆ–é€‰æ‹©ç‰¹å®šç‰ˆæœ¬

3. **ä¸‹è½½å¯¹åº”å¹³å°çš„å®‰è£…åŒ…**

   **macOS ç”¨æˆ·ï¼š**
   - Apple Silicon (M1/M2/M3/M4)ï¼šä¸‹è½½ `AiTer-*-mac-arm64.dmg`
   - Intel èŠ¯ç‰‡ï¼šä¸‹è½½ `AiTer-*-mac-x64.dmg`

   **Windows ç”¨æˆ·ï¼š**
   - ä¸‹è½½ `AiTer-*-win-x64.exe`

4. **å®‰è£…åº”ç”¨**
   - å‚è€ƒ Release è¯´æ˜ä¸­çš„å®‰è£…æ­¥éª¤

## ğŸ” æƒé™å’Œå®‰å…¨

### ä»“åº“æƒé™

- **Private Repository**ï¼šåªæœ‰å›¢é˜Ÿæˆå‘˜å¯ä»¥è®¿é—®å’Œä¸‹è½½
- **Public Repository**ï¼šä»»ä½•äººéƒ½å¯ä»¥ä¸‹è½½ï¼ˆå½“å‰ä¸º privateï¼‰

### GitHub Token

å·¥ä½œæµä½¿ç”¨ `GITHUB_TOKEN` è‡ªåŠ¨ç”Ÿæˆçš„ä»¤ç‰Œï¼š
- è‡ªåŠ¨æä¾›ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®
- ä»…åœ¨å·¥ä½œæµè¿è¡ŒæœŸé—´æœ‰æ•ˆ
- å…·æœ‰åˆ›å»º Release æ‰€éœ€çš„æƒé™

## ğŸ› ï¸ æ•…éšœæ’é™¤

### æ„å»ºå¤±è´¥

å¦‚æœæ„å»ºå¤±è´¥ï¼Œæ£€æŸ¥ï¼š

1. **ç±»å‹æ£€æŸ¥å¤±è´¥**
   ```bash
   # æœ¬åœ°è¿è¡Œç±»å‹æ£€æŸ¥
   npm run type-check
   ```

2. **ä¾èµ–é—®é¢˜**
   - ç¡®ä¿ `package.json` å’Œ `package-lock.json` å·²æäº¤
   - æ£€æŸ¥ Node.js ç‰ˆæœ¬è¦æ±‚ï¼ˆ>=18.0.0ï¼‰

3. **æŸ¥çœ‹æ„å»ºæ—¥å¿—**
   - GitHub Actions é¡µé¢ â†’ ç‚¹å‡»å¤±è´¥çš„å·¥ä½œæµ
   - æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯

### Release æœªåˆ›å»º

å¦‚æœæ„å»ºæˆåŠŸä½†æœªåˆ›å»º Releaseï¼š

1. **æ£€æŸ¥ Tag æ ¼å¼**
   - å¿…é¡»ä»¥ `v` å¼€å¤´
   - æ ¼å¼ï¼š`vä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢å·`
   - ç¤ºä¾‹ï¼š`v0.1.0`ï¼ˆæ­£ç¡®ï¼‰ï¼Œ`0.1.0`ï¼ˆé”™è¯¯ï¼‰

2. **æ£€æŸ¥æƒé™**
   - ç¡®ä¿ä»“åº“è®¾ç½®å…è®¸ Actions åˆ›å»º Release
   - Settings â†’ Actions â†’ General â†’ Workflow permissions

## ğŸ“Š å·¥ä½œæµçŠ¶æ€æŸ¥çœ‹

1. è®¿é—®ä»“åº“çš„ **Actions** æ ‡ç­¾
2. æŸ¥çœ‹æœ€è¿‘çš„å·¥ä½œæµè¿è¡Œ
3. ç»¿è‰² âœ“ = æˆåŠŸï¼Œçº¢è‰² âœ— = å¤±è´¥
4. ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

## ğŸ“œ å‘å¸ƒè„šæœ¬è¯¦ç»†è¯´æ˜

### è„šæœ¬åŠŸèƒ½

`scripts/create-release.sh` æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

**å®‰å…¨æ£€æŸ¥ï¼š**
- âœ… éªŒè¯ç‰ˆæœ¬å·æ ¼å¼ï¼ˆå¿…é¡»ç¬¦åˆè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒï¼‰
- âœ… æ£€æŸ¥æ ‡ç­¾æ˜¯å¦å·²å­˜åœ¨ï¼ˆé˜²æ­¢é‡å¤å‘å¸ƒï¼‰
- âœ… æ£€æŸ¥æœªæäº¤çš„æ›´æ”¹ï¼ˆæç¤ºç”¨æˆ·å¤„ç†ï¼‰
- âœ… æ¨é€å‰éœ€è¦ç”¨æˆ·ç¡®è®¤

**è‡ªåŠ¨åŒ–æ“ä½œï¼š**
- âœ… è‡ªåŠ¨æ›´æ–° `package.json` ä¸­çš„ç‰ˆæœ¬å·
- âœ… è‡ªåŠ¨æäº¤æ›´æ”¹ï¼ˆåŒ…å«è§„èŒƒçš„æäº¤ä¿¡æ¯ï¼‰
- âœ… è‡ªåŠ¨åˆ›å»º Git æ ‡ç­¾
- âœ… è‡ªåŠ¨æ¨é€åˆ° GitHub

**ç”¨æˆ·å‹å¥½ï¼š**
- ğŸ¨ å½©è‰²è¾“å‡ºå’Œè¿›åº¦æç¤º
- ğŸ“Š è¯¦ç»†çš„æ­¥éª¤è¯´æ˜
- âš ï¸ æ¸…æ™°çš„é”™è¯¯æç¤º
- ğŸ”— æä¾› GitHub Actions å’Œ Release é“¾æ¥

### ä½¿ç”¨ç¤ºä¾‹

```bash
# ä¿®å¤ Bug ç‰ˆæœ¬
npm run release 0.1.1

# æ–°åŠŸèƒ½ç‰ˆæœ¬
npm run release 0.2.0

# é‡å¤§æ›´æ–°ç‰ˆæœ¬
npm run release 1.0.0
```

### è„šæœ¬å‚æ•°

```bash
./scripts/create-release.sh <version>
```

- `<version>`: ç‰ˆæœ¬å·ï¼ˆä¸éœ€è¦ `v` å‰ç¼€ï¼‰
- ç¤ºä¾‹ï¼š`0.1.1`ã€`1.0.0`ã€`2.3.4`

### é”™è¯¯å¤„ç†

**æ— æ•ˆç‰ˆæœ¬æ ¼å¼ï¼š**
```
âœ— Invalid version format: 0.1
â„¹ Version must follow semantic versioning: MAJOR.MINOR.PATCH
â„¹ Example: 0.1.0, 1.0.0, 1.2.3
```

**æ ‡ç­¾å·²å­˜åœ¨ï¼š**
```
âœ— Tag v0.1.0 already exists!
â„¹ Use a different version number or delete the existing tag:
â„¹   git tag -d v0.1.0
â„¹   git push origin :refs/tags/v0.1.0
```

**æœªæäº¤çš„æ›´æ”¹ï¼š**
```
âš  You have uncommitted changes:
 M package.json
 M src/main/index.ts

Do you want to commit all changes before releasing? (y/n)
```

## ğŸ”„ æ›´æ–°ç°æœ‰ Release

å¦‚æœéœ€è¦æ›´æ–°å·²å‘å¸ƒçš„ç‰ˆæœ¬ï¼š

```bash
# 1. åˆ é™¤æœ¬åœ°æ ‡ç­¾
git tag -d v0.1.0

# 2. åˆ é™¤è¿œç¨‹æ ‡ç­¾
git push origin :refs/tags/v0.1.0

# 3. åœ¨ GitHub ä¸Šæ‰‹åŠ¨åˆ é™¤ Release
# è®¿é—®: https://github.com/Within-7/aiter/releases
# æ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬ï¼Œç‚¹å‡» "Delete"

# 4. é‡æ–°è¿è¡Œå‘å¸ƒè„šæœ¬
npm run release 0.1.0
```

## ğŸ“§ è”ç³»æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ï¼š
- **å¼€å‘è€…**ï¼šLib
- **é‚®ç®±**ï¼šdev@within-7.com
- **å…¬å¸**ï¼šä»»å°å§å‡ºæµ·æˆ˜ç•¥å’¨è¯¢

---

**ç‰ˆæƒæ‰€æœ‰ Â© 2025-2026 Within-7.com**
