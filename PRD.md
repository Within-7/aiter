# Airter - Minto Terminal Client PRD

## 产品概述

Airter 是一个专为 Minto CLI 协作优化的桌面终端应用，提供项目管理和多终端窗口功能。

## 产品目标

1. 简化 Minto 项目切换和管理流程
2. 提供直观的多项目、多终端窗口管理界面
3. 支持跨平台运行（macOS Intel/M系列、Windows）

## 核心功能

### 1. 项目侧边栏（左侧）

**功能描述：**
- 显示所有已添加的项目列表
- 支持添加新项目（选择文件夹）
- 支持删除项目
- 点击项目自动在右侧打开对应目录的终端
- 项目列表持久化存储

**UI要素：**
- 项目名称（文件夹名）
- 项目路径（悬停提示）
- 添加按钮（+）
- 删除按钮（右键菜单或图标）
- 当前激活项目高亮显示

**交互设计：**
- 单击项目：激活项目并在右侧打开新终端标签
- 右键项目：显示上下文菜单（删除、在文件管理器中打开）
- 拖拽文件夹到侧边栏：添加为新项目

### 2. 终端窗口区域（右侧）

**功能描述：**
- 多标签页终端管理
- 每个标签对应一个终端实例
- 标签显示项目名称或自定义名称
- 支持关闭标签
- 支持在同一项目下打开多个终端
- 终端完全兼容 Minto CLI 交互

**UI要素：**
- 标签栏（可横向滚动）
- 新建标签按钮（+）
- 关闭标签按钮（×）
- 终端显示区域
- 标签右键菜单（重命名、复制路径、关闭）

**交互设计：**
- 点击标签：切换到对应终端
- 中键点击标签：关闭标签
- 标签支持拖拽排序
- Ctrl/Cmd + T：新建当前项目的终端标签
- Ctrl/Cmd + W：关闭当前标签
- Ctrl/Cmd + Tab：切换标签

### 3. 终端能力

**核心要求：**
- 完整 Shell 兼容（bash/zsh/cmd/powershell）
- 支持 ANSI 颜色和格式化
- 支持交互式命令（vim、nano等）
- 支持 Minto CLI 的所有特性
- 支持复制粘贴
- 支持文本选择
- 可配置字体和主题

### 4. 数据持久化

**存储内容：**
- 项目列表（路径、名称）
- 窗口布局偏好
- 终端主题设置
- 最近打开的项目

**存储位置：**
- macOS: `~/Library/Application Support/Airter/`
- Windows: `%APPDATA%/Airter/`

## 技术方案

### 技术栈

**框架：**
- Electron: 跨平台桌面应用框架
- React: UI 组件开发
- TypeScript: 类型安全开发

**核心依赖：**
- xterm.js: 终端模拟器
- node-pty: 伪终端（pty）进程管理
- electron-store: 数据持久化

**开发工具：**
- Vite: 构建工具
- electron-builder: 打包工具

### 架构设计

```
airter/
├── src/
│   ├── main/              # Electron 主进程
│   │   ├── index.ts       # 主进程入口
│   │   ├── window.ts      # 窗口管理
│   │   ├── pty.ts         # PTY 进程管理
│   │   └── store.ts       # 数据存储
│   ├── renderer/          # Electron 渲染进程
│   │   ├── App.tsx        # 应用根组件
│   │   ├── components/
│   │   │   ├── Sidebar.tsx      # 项目侧边栏
│   │   │   ├── Terminal.tsx     # 终端组件
│   │   │   └── TabBar.tsx       # 标签栏
│   │   ├── hooks/
│   │   └── styles/
│   └── preload/           # 预加载脚本
│       └── index.ts
├── package.json
├── tsconfig.json
├── vite.config.ts
└── electron-builder.yml
```

### 跨平台支持

**macOS:**
- 支持 Intel (x64) 和 Apple Silicon (arm64)
- 打包格式: DMG、ZIP
- 代码签名（可选）

**Windows:**
- 支持 x64 架构
- 打包格式: NSIS 安装程序、便携版
- 自动更新支持

## UI/UX 设计

### 布局

```
┌─────────────────────────────────────────────┐
│  Airter                              ⚫ ⚪ ⚪  │
├──────────┬──────────────────────────────────┤
│ Projects │ [Tab1] [Tab2] [Tab3]        [+]  │
│          ├──────────────────────────────────┤
│ [+]      │                                   │
│          │                                   │
│ Project1 │      Terminal Display Area       │
│ Project2 │                                   │
│ Project3 │                                   │
│          │                                   │
│          │                                   │
└──────────┴──────────────────────────────────┘
```

### 主题

**默认主题：** VS Code Dark 风格
- 侧边栏背景: #252526
- 终端背景: #1e1e1e
- 标签栏背景: #2d2d30
- 激活标签: #1e1e1e
- 文本颜色: #cccccc

## 开发计划

### Phase 1: 基础框架搭建（Week 1）
- 初始化 Electron + React + TypeScript 项目
- 配置 Vite 和 electron-builder
- 实现基础窗口和布局

### Phase 2: 核心功能开发（Week 2-3）
- 实现项目侧边栏组件
- 实现终端集成（xterm.js + node-pty）
- 实现多标签管理
- 实现项目管理（添加/删除/持久化）

### Phase 3: 功能完善（Week 4）
- 快捷键支持
- 主题配置
- 右键菜单
- 错误处理和用户提示

### Phase 4: 打包和测试（Week 5）
- 跨平台打包配置
- macOS (Intel/M-series) 测试
- Windows 测试
- 性能优化

## 成功指标

1. **性能:**
   - 应用启动时间 < 2秒
   - 终端响应延迟 < 50ms
   - 内存占用 < 200MB（空闲状态）

2. **兼容性:**
   - macOS 11+ 完美运行
   - Windows 10/11 完美运行
   - 支持常见 Shell（bash、zsh、cmd、PowerShell）

3. **用户体验:**
   - 项目切换流畅无卡顿
   - 支持 10+ 并发终端标签
   - 数据持久化 100% 可靠

## 风险和挑战

1. **终端兼容性:** 不同平台 Shell 行为差异
   - 解决方案: node-pty 自动检测默认 Shell

2. **性能问题:** 多个终端实例内存占用
   - 解决方案: 标签惰性加载、限制最大标签数

3. **跨平台差异:** 不同操作系统路径、权限处理
   - 解决方案: 统一路径处理、权限检查

## 未来扩展

1. 终端会话恢复（重启后恢复之前的终端）
2. SSH 远程连接支持
3. 分屏终端（水平/垂直分割）
4. Minto 快捷操作面板
5. 终端历史记录搜索
6. 自定义主题编辑器
